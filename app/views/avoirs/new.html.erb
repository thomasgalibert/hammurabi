<%= form_with url: facture_avoirs_path(@facture), class: "max-w-3xl" do |form| %>
  
  <fieldset class="bg-white border rounded-md p-6 relative mt-20">
    <legend class="absolute -top-20 text-stone-500 text-lg">
      <div>
        <span class="font-semibold"><%= t('factures.avoir.legend') %> </span>
        <%= @dossier.name %>
      </div>

      <div>
        <%= t('factures.avoir.recall') %> : <%=number_to_currency @facture.total_ht %> 
        <span class="text-xs">(<%=number_to_currency @facture.total_ttc %> <%= t('factures.pdf.lignes.total_ttc') %>)</span>
      </div>
    </legend>

    <div class="flex flex-col space-y-2 mb-6">
      <%= form.label :amount, t('factures.avoir.amount'), class: "block text-sm font-medium leading-6 text-stone-900" %>
      <%= form.number_field :amount, step: :any, min: 0, autofocus: true,
          class: "block w-full rounded-md border-0 py-1.5 text-stone-900 shadow-sm ring-1 ring-inset ring-stone-300 placeholder:text-stone-400 focus:ring-2 focus:ring-inset focus:ring-emerald-600 sm:text-sm sm:leading-6" %>
      
      <span class="pt-4 inline-blocl italic text-amber-600 text-sm"><%= t('factures.avoir.hint_amount') %></span>
    </div>

    <%= form.submit t('factures.avoir.submit'), 
        class: "mt-10 flex w-full justify-center rounded-md bg-emerald-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-emerald-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-600" %>
  </fieldset>
<% end %>

<p class="mt-10">
  <%= render LinkComponent.new(
              name: t('factures.avoir.cancel'), 
              url: dossier_facture_path(@dossier, @facture), 
              color: "stone") %>
</p>