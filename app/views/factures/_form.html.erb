<%= form_with model: [@dossier, @facture], url: dossier_facture_path(@dossier, @facture, attribute: params[:attribute]), method: :patch do |form| %>
  <div class="flex items-center my-6 space-x-4">
    <% if params[:attribute] == "contact_id" %>
      <div class="relative flex items-center w-full">
        <%= form.select :contact_id,
            @dossier.contacts.collect { |c| [k(c).name_with_company, c.id] },
            {},
            class: "inline-block flex-1 text-sm rounded-md border-0 py-1.5 px-2 text-gray-900",
            autofocus: true %>
      </div>
      <%= form.submit class: "justify-center rounded-md bg-emerald-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-emerald-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-600" %>
    <% end %>
  </div>

  <div class="flex items-center my-6 space-x-4">
    <% if params[:attribute] == "convention_id" %>
      <div class="relative flex items-center w-full">
        <%= form.select :convention_id,
            @dossier.conventions.collect { |c| [k(c).amount_with_date, c.id] },
            {},
            class: "inline-block flex-1 text-sm rounded-md border-0 py-1.5 px-2 text-gray-900",
            autofocus: true %>
      </div>
      <%= form.submit class: "justify-center rounded-md bg-emerald-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-emerald-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-600" %>
    <% end %>
  </div>

  <% if params[:attribute] == "description" %>
    <%= form.rich_text_area :description, 
        class: "block w-full rounded-md border-0 py-1.5 text-stone-900 shadow-sm ring-1 ring-inset ring-stone-300 placeholder:text-stone-400 focus:ring-2 focus:ring-inset focus:ring-emerald-600 sm:text-sm sm:leading-6", 
        autofocus: true %>

    <%= form.submit class: "flex mt-4 w-full justify-center rounded-md bg-emerald-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-emerald-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-600" %>
  <% end %>
<% end %>

