<li id="<%= dom_id(@contact) %>" 
    data-controller="contact"
    data-contact-id-value="<%= @contact.id %>"
    data-contact-main-value="<%= @contact.main %>"
    data-contact-dossier-value="<%= @dossier.id %>"
    class="col-span-1 divide-y divide-gray-200 rounded-lg bg-white shadow">
  <div class="flex w-full items-center justify-between space-x-6 p-6">
    <div class="flex-1 truncate">
      <div class="flex items-center space-x-3">
        <h3 class="truncate text-sm font-medium text-gray-900">
          <%= link_to @contact.name.full, dossier_contact_path(@dossier, @contact), "data-turbo-frame": "modal" if @contact.last_name.present? %>
          <%= link_to "-- no name --", dossier_contact_path(@dossier, @contact), "data-turbo-frame": "modal" unless @contact.last_name.present? %>
        </h3>
        <%= k(@contact).badge %>
        <%= k(@contact).star(@dossier) %>
      </div>
      <div class="flex items-center space-x-4 mt-4 truncate text-xs text-gray-500">
        <%= link_to dossier_asks_path(@dossier, contact_id: @contact.id), class: "flex items-center space-x-1" do %>
          <svg class="text-blue-500 size-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path d="M6 7.75a0.75 0.75 0 0 0 0 1.5h6a0.75 0.75 0 0 0 0 -1.5Z" fill="currentcolor" stroke-width="1"></path><path d="M9.4 16.25a0.25 0.25 0 0 0 0.24 -0.2 7.48 7.48 0 0 1 0.24 -1c0 -0.11 0 -0.34 -0.33 -0.34H6a0.75 0.75 0 0 0 0 1.5Z" fill="currentcolor" stroke-width="1"></path><path d="M9.69 19.19a0.26 0.26 0 0 0 -0.24 -0.19H3.5a0.5 0.5 0 0 1 -0.5 -0.5v-13a0.5 0.5 0 0 1 0.5 -0.5h11a0.5 0.5 0 0 1 0.5 0.5v4.08a0.24 0.24 0 0 0 0.3 0.24 19.85 19.85 0 0 1 2.47 -0.29 0.25 0.25 0 0 0 0.23 -0.25V3.5A1.5 1.5 0 0 0 16.5 2h-4a0.27 0.27 0 0 1 -0.21 -0.12 3.82 3.82 0 0 0 -6.58 0A0.27 0.27 0 0 1 5.5 2h-4A1.5 1.5 0 0 0 0 3.5v17A1.5 1.5 0 0 0 1.5 22h8.94a0.25 0.25 0 0 0 0.21 -0.38 7.67 7.67 0 0 1 -0.96 -2.43Z" fill="currentcolor" stroke-width="1"></path><path d="M12.24 11.48c0.09 -0.08 0 -0.23 -0.24 -0.23H6a0.75 0.75 0 0 0 0 1.5h5a0.26 0.26 0 0 0 0.19 -0.1 8.63 8.63 0 0 1 1.05 -1.17Z" fill="currentcolor" stroke-width="1"></path><path d="M17.5 11a6.5 6.5 0 1 0 6.5 6.5 6.51 6.51 0 0 0 -6.5 -6.5Zm0 11.5a1 1 0 1 1 1 -1 1 1 0 0 1 -1 1Zm0.87 -4.15a0.17 0.17 0 0 0 -0.12 0.17v0.23a0.75 0.75 0 0 1 -1.5 0v-0.55a1.27 1.27 0 0 1 1 -1.23 1.12 1.12 0 1 0 -1.36 -1.1 0.75 0.75 0 0 1 -0.76 0.75 0.74 0.74 0 0 1 -0.74 -0.75 2.62 2.62 0 1 1 3.49 2.48Z" fill="currentcolor" stroke-width="1"></path></g></svg>
          <span><%= t('contacts.buttons.ask_documents') %></span>
        <% end %>

        <% if @contact.kind == "partner" %>
          <%= link_to dossier_dossier_share_links_path(@dossier, contact_id: @contact.id), class: "flex items-center space-x-1" do %>
            <svg class="size-5 text-emerald-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path d="m16.63 22.31 -1.13 -0.46A4.25 4.25 0 0 1 9.19 17a4.24 4.24 0 0 1 5.71 -2.65l1.67 -1a4.39 4.39 0 0 1 1.19 -2.55A4.19 4.19 0 0 1 20 9.58V6a2 2 0 0 0 -1.6 -2 0.5 0.5 0 0 1 -0.4 -0.49V2a2 2 0 0 0 -2 -2H3.5a3 3 0 0 0 -3 3v18a3 3 0 0 0 3 3h14a4.31 4.31 0 0 1 -0.87 -1.69ZM2.5 3a1 1 0 0 1 1 -1h12.25a0.25 0.25 0 0 1 0.25 0.25v1.5a0.25 0.25 0 0 1 -0.25 0.25H3.5a1 1 0 0 1 -1 -1Z" fill="currentcolor" stroke-width="1"></path><path d="M21.63 18.64a2.75 2.75 0 0 0 -2.77 0.62 0.25 0.25 0 0 1 -0.26 0.06l-2.55 -1a0.12 0.12 0 0 1 -0.06 -0.08l0 -0.35a0.15 0.15 0 0 1 0.06 -0.1L18.94 16a0.26 0.26 0 0 1 0.27 0 2.69 2.69 0 0 0 2.4 0.35 2.72 2.72 0 0 0 1.77 -1.77A2.76 2.76 0 0 0 20.75 11 2.8 2.8 0 0 0 18 14.06a0.25 0.25 0 0 1 -0.12 0.22L15.06 16a0.26 0.26 0 0 1 -0.27 0 2.75 2.75 0 0 0 -4.17 1.42 2.75 2.75 0 0 0 4.52 2.83 0.23 0.23 0 0 1 0.26 0l2.46 1a0.23 0.23 0 0 1 0.14 0.21 2.76 2.76 0 1 0 5.37 -1 2.7 2.7 0 0 0 -1.74 -1.82Z" fill="currentcolor" stroke-width="1"></path></g></svg>
            <span><%= t('contacts.buttons.share_dossier') %></span>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
  <div>
    <div class="-mt-px flex divide-x divide-gray-200">
      <div class="flex w-0 flex-1">
        <a href="mailto:<%= @contact.email %>" class="relative -mr-px inline-flex w-0 flex-1 items-center justify-center gap-x-3 rounded-bl-lg border border-transparent py-4 text-sm font-semibold text-gray-900">
          <svg class="h-5 w-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path d="M3 4a2 2 0 00-2 2v1.161l8.441 4.221a1.25 1.25 0 001.118 0L19 7.162V6a2 2 0 00-2-2H3z" />
            <path d="M19 8.839l-7.77 3.885a2.75 2.75 0 01-2.46 0L1 8.839V14a2 2 0 002 2h14a2 2 0 002-2V8.839z" />
          </svg>
          Email
        </a>
      </div>
      <div class="-ml-px flex w-0 flex-1">
        <a href="tel:<%= @contact.phone %>" class="relative inline-flex w-0 flex-1 items-center justify-center gap-x-3 rounded-br-lg border border-transparent py-4 text-sm font-semibold text-gray-900">
          <svg class="h-5 w-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path fill-rule="evenodd" d="M2 3.5A1.5 1.5 0 013.5 2h1.148a1.5 1.5 0 011.465 1.175l.716 3.223a1.5 1.5 0 01-1.052 1.767l-.933.267c-.41.117-.643.555-.48.95a11.542 11.542 0 006.254 6.254c.395.163.833-.07.95-.48l.267-.933a1.5 1.5 0 011.767-1.052l3.223.716A1.5 1.5 0 0118 15.352V16.5a1.5 1.5 0 01-1.5 1.5H15c-1.149 0-2.263-.15-3.326-.43A13.022 13.022 0 012.43 8.326 13.019 13.019 0 012 5V3.5z" clip-rule="evenodd" />
          </svg>
          Appel
        </a>
      </div>
    </div>
  </div>
</li>